function initialize(e){var o=viewGoogleMap(e,null,!0)}function setZoomLimit(e,o){var t=e.mapTypes,n=t.get(o);n.maxZoom=17,n.minZoom=11}function resizeWindow(){var e=document.getElementById("map_custmomize")}var gmap,tMarker,viewGoogleMap=function(e,o,t){var n,a,i=new Array,r=new google.maps.MVCArray,l=function(e,o){google.maps.event.addListener(e,"mouseover",function(t){n&&n.close();var a=new google.maps.Size(-15,15);n=new google.maps.InfoWindow({content:o.content,pixelOffset:a}),google.maps.event.addListener(n,"closeclick",function(){n=null}),n.open(e.getMap(),e)})},s=function(e,o){e.bind("click",function(){google.maps.event.trigger(o,"mouseover")})},p=function(e){var o=null;$("#spot_list > ul").empty();for(var t=0;t<e.length;t++){var n=new google.maps.MarkerImage("/wp/wp-content/themes/kyoryuchi/assets/js/img/mapya.png",new google.maps.Size(64,64),new google.maps.Point(0,0),new google.maps.Point(16,32),new google.maps.Size(32,32)),a=new google.maps.Marker({position:e[t].position,title:e[t].title,map:gmap,icon:n,id:e[t].id});l(a,e[t],!0),i.push(a),o=$("<li>").attr("id",e[t].id),o=$("<li>").append($('<a href="javascript:void(0)"/>').text(e[t].title)),$("#spot_list > ul").append(o),s(o,a)}},c=function(){$("#spot_list > ul > li").remove();var e;e="/wp/wp-content/themes/kyoryuchi/assets/js/json/shop.json",$.ajax({url:e,type:"get",dataType:"json",scriptCharset:"utf-8",cache:!1,timeout:1e4,error:function(){console.log("Miss..")},success:function(e){for(var o=new Array,t=0;t<e.length;t++){if(cat_ary=e[t].cat.split(","),$.inArray(location.hash.replace("#",""),cat_ary)>=0){var n="<a href='"+e[t].url+"' target='_blank'>"+e[t].name+"</a>";o.push({position:new google.maps.LatLng(e[t].lat,e[t].lng),title:e[t].name,cat:e[t].cat,content:n,id:e[t].place_id})}o.length>0&&p(o)}}})};if(o=o?o:{},null!=e){var g={zoom:o.zoom||17,center:o.center||new google.maps.LatLng(34.688417,135.193494),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!0,zoomControl:!0,scaleControl:!0,streetViewControl:!1,navigationControlOptions:{style:google.maps.NavigationControlStyle.DEFAULT}};gmap=new google.maps.Map(document.getElementById(e),g);var m=[{stylers:[{saturation:"-60"},{hue:"#cc9966"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#cbdfad"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]}];gmap.setOptions({styles:m}),google.maps.event.addListener(gmap,"idle",function(){c(),$("#cat_name").html($("a[href = "+location.hash+"]").text())})}};$(function(){$(".cat li").click(function(){initialize("map_custmomize")})}),Array.prototype.forEach||(Array.prototype.forEach=function(e,o){var t,n;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),i=a.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(o&&(t=o),n=0;i>n;){var r;n in a&&(r=a[n],e.call(t,r,n,a)),n++}});